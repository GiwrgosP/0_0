Σκοπός:

Στη μελέτη αυτή καταγράφονται τα βήματα για την εκτύπωση QR Code myDATA στα παραστατικά που εκδίδονται από το Pegasus Webapp και ειδικότερα για τις μη standard φόρμες.

Προϋποθέσεις:

1. Θα πρέπει οπωσδήποτε να έχετε πάρει όλες τις διαθέσιμες Αναβαθμίσεις.

2. Για την περίπτωση όπου χρησιμοποιείτε custom φόρμες:

a. Θα πρέπει απαραίτητα να έχει οριστεί η κλάση εκτύπωσης TCPDF (Toolbox->Επεξεργασία Φορμών εκτύπωσης->tab Γενικά Στοιχεία->Κλάση Εκτύπωσης).



b. Επιπλέον θα πρέπει στο tab [Body SQL] το πεδίο να είναι κενό.

Αν η φόρμα σας ανήκει σε κάποια από τις περιπτώσεις a ή b, δεν μπορούν να εφαρμοστούν τα βήματα που περιγράφονται παρακάτω και θα πρέπει να τροποποιηθεί ανάλογα. Θα χρειαστεί να καταχωρήσετε μια ΠΠΥ προς το Τμήμα Τεχνικής Υποστήριξης προκειμένου να την ελέγξουν.

Λειτουργία:

Στη νέα έκδοση του myDATA API, το response της υπηρεσίας θα επιστρέφει ένα QR Code μαζί με το MARK και το Αναγνωριστικό Παρ/κου.

Αυτό το QR Code θα πρέπει να εμφανίζεται στο σχετικό παραστατικό σε ευδιάκριτο σημείο. Επίσης θα πρέπει να έχει συγκεκριμένο μέγεθος (18 x 18 χιλιοστά).

Πλέον σε όλες τις standard φόρμες εκτύπωσης, το QR Code αυτό καθώς και τα ΜΑΡΚ/Αναγνωριστικό εμφανίζονται αυτόματα (Δεν χρειάζεται να κάνετε κάποια άλλη ενέργεια, απλά χρησιμοποιείτε τη std φόρμα σας για την εκτύπωση).

Αν έχετε κάποια custom φόρμα εκτύπωσης, ενδέχεται να μην περιέχει τα στοιχεία αυτά (πρότυπες εκφράσεις) με τα οποία θα εμφανίζεται το QR Code και το ΜΑΡΚ/Αναγνωριστικό. Ως εκ τούτου, θα πρέπει να τροποποιηθεί σύμφωνα με τα βήματα που ακολουθούν.

Σημείωση: Για την παραμετροποίηση των φορμών εκτύπωσης μπορείτε να δείτε τη μελέτη

https://www.tesae.gr/articles/protipes-meletes-i-efarmoges-(pegasus-webapp)/formes-ektiposis/parametropiisi-formas-ektiposis-apo-to-webapp.html

Βήματα:

Για να εμφανιστούν το QR Code του myDATA καθώς και το UID μαζί με το MARK του παραστατικού, έχουν δημιουργηθεί δυο πρότυπες εκφράσεις τις οποίες μπορείτε πολύ εύκολα να προσθέσετε στις μη-standard φόρμες σας.

Βήμα 1

Από τη διαδρομή [Toolbox->Επεξεργασία Φορμών εκτύπωσης] θα ανοίξετε τη φόρμα εκτύπωσης που θέλετε να παραμετροποιηθεί.

Για το QR Code θα δημιουργήσετε ένα νέο πεδίο στο οποίο θα επιλέξετε ως [Πρότυπη Έκφραση] την τιμή [Barcode (QRCode)]. Το πεδίο θα πρέπει να έχει μέγεθος στη φόρμα 6 γραμμές και 13 στήλες ώστε να έχει το ελάχιστο επιτρεπτό μέγεθος. Μπορείτε να αλλάξετε τις τιμές αυτές προς τα πάνω ώστε να εμφανίζεται μεγαλύτερο.

Βήμα 2

Για το UID και το MARK θα δημιουργήσετε ένα νέο πεδίο στο οποίο θα επιλέξετε ως [Πρότυπη Έκφραση] την "Φορολογικά Στοιχεία".

Για το νεό πεδίο θα πρέπει να ορίσετε στο tab [Βασικά Στοιχεία] το πεδίο [Έως Γραμμή] με τιμή διαφορετική του 0. Επιπλέον το σύνολο των γραμμών που καταλαμβάνει το πεδίο θα πρέπει στο ελάχιστο να είναι τρεις γραμμές.